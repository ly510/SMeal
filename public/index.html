<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" 
    rel="stylesheet" 
    integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" 
    crossorigin="anonymous">

    <title>Welcome to SMeal</title>
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/index.css">

    <!-- Script js-->
    <script src="js/account.js"></script>
</head>
<body class="body-wrapper">
    <!-- Nav Bar -->
	<header>
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<nav class="navbar navbar-expand-lg navbar-light navigation">
						<a class="navbar-brand" href="index.html">
							<img src="img/logo-black.png" alt="" style="max-height: 60px;">
						</a>
						<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
							aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
							<span class="navbar-toggler-icon"></span>
						</button>
						<div class="collapse navbar-collapse" id="navbarSupportedContent">
							<ul class="navbar-nav ms-auto main-nav">
								<li class="nav-item">
									<a class="nav-link" type="button" name="openLoginModel">Login</a>
								</li>
                				<li class="nav-item">
									<a class="nav-link" type="button" name="openSignupModel">Sign Up</a>
								</li>
                				<li class="nav-item">
									<a class="nav-link" href="#about-href" id="about">About</a>
								</li>
              				</ul>
						</div>
					</nav>					
				</div>
			</div>
		</div>
	</header>

    <section id="landingPage" class="bsb-hero-2 bsb-tpl-bg-blue py-5 py-xl-8 py-xxl-10">
        <div class="container overflow-hidden">
          <div class="row gy-3 gy-lg-0 align-items-lg-center justify-content-lg-between">
            <div class="col-12 col-lg-6 order-1 order-lg-0">
              <h1 class="display-3 fw-bolder mb-3">A <mark class="bsb-tpl-highlight"><span class="bsb-tpl-font-hw display-2 text-accent fw-normal">better way</span><br></mark> to never miss a meal again.</h1>
              <p class="fs-4 mb-5">Our campus, your deliveries - join SMU's exclusive Intra-School Delivery Platform</p>
              <div class="d-grid gap-2 d-sm-flex">
                <button type="button" class="btn btn-primary bsb-btn-3xl rounded-pill" name="openSignupModel">Create Account</button>
                <button type="button" class="btn btn-outline-primary bsb-btn-3xl rounded-pill" name="openLoginModel">Log In</button>
              </div>
            </div>
            <div class="col-12 col-lg-5 text-center">
              <img class="img-fluid" loading="lazy" src="img/food3-2.jpeg" alt="" style="-webkit-mask-image: url(img/blob.svg); mask-image: url(img/blob.svg); width: 100%;">
            </div>
          </div>
        </div>
      </section>
</body>

  <!-- About the platform -->
  <main id="about">

    <!-- Section - Services -->
    <!-- Service 3 - Bootstrap Brain Component -->
    <section id="scrollspyServices" class="py-5 py-xl-8 bsb-section-py-xxl-1">
      <div class="container mb-5 mb-md-6 mb-xl-10">
        <div class="row justify-content-md-center">
          <div class="col-12 col-md-10 col-lg-9 col-xl-8 col-xxl-7 text-center">
            <h2 class="display-5 fw-bolder mb-4">Specially designed for SM-You <br>with these specific benefits <br>in mind.</h2>
          </div>
        </div>
      </div>

      <div class="container overflow-hidden">
        <div class="row gy-5 gx-md-4 gy-lg-0 gx-xxl-5 justify-content-center">
          <div class="col-11 col-sm-6 col-lg-3">

            <h4 class="mb-3">Affordability</h4>
            <p class="mb-3 text-secondary">Enjoy cost-effective deliveries right on campus and bid farewell to platform and commission fees. <br><br> 
                                            We understand you're on a budget, so why not switch to an affordable, everyday alternative right here?</p>
          </div>
          <div class="col-11 col-sm-6 col-lg-3">

            <h4 class="mb-3">Convenience</h4>
            <p class="mb-3 text-secondary">Experience ultimate convenience with on-campus deliveries. Your needs, your schedule, our service. <br><br>
                                            No more having to travel to collect your order. We'll bring it right to you at your classrooms or study areas!</p>
          </div>
          <div class="col-11 col-sm-6 col-lg-3">
    
            <h4 class="mb-3">Diverse Options</h4>
            <p class="mb-3 text-secondary">Explore diverse food options with SMeal, and choose options from restaurants near you!. <br><br>
                                            Don't settle for less when you're in a rush! When a classroom door closes, the SMeal window opens.  </p>
          </div>
          <div class="col-11 col-sm-6 col-lg-3">

            <h4 class="mb-3">Rewards System</h4>
            <p class="mb-3 text-secondary" id="about-href">Unlock rewards with points earned from every order you've helped fulfill. Because hey, <br><br>
                                            Helping your peers pays off. You get to enjoy exclusive perks and discounts with the points earned.</p>
          </div>
        </div>
        <button class="scroll-top" id="scroll-top">â†‘</button>
      </div>
    </section>

<!-- Login Modal -->
<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel"
aria-hidden="true">
<div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
    <div class="modal-header text-center">
        <img src="img/logo-black.png" width="70px" class="modal-title"/>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
        <form id="signinForm">
			<div class="alert alert-danger d-none" id="l_errorMsg" role="alert">
			</div>
            <h4 class="modal-title text-center" id="signupModalLabel">Login Now!</h4>
            <fieldset class="p-4">
                <label for="l_email" class="form-label">SMU Email Address</label>
                <input id="l_email" class="form-control mb-3" type="text" placeholder="abc@xxx.smu.edu.sg / abc@smu.edu.sg" required>

                <label for="l_pwd" class="form-label">Password</label>
                <input id="l_pwd" class="form-control mb-3" type="password" placeholder="Password" required>

                <div class="d-flex justify-content-end"><button id="signinButton" type="submit" class="btn btn-primary font-weight-bold mt-3">Login</button></div>
                <p class="text-secondary text-center mt-4">Don't have an account? 
                  <a class="text-primary text-decoration-none" name="openSignupModel" data-bs-dismiss="modal" type="button">Sign Up</a>
                </p>
            </fieldset>
        </form>
    </div>
    </div>
</div>
</div>

<!-- Register Modal -->
<div class="modal fade" id="signupModal" tabindex="-1" role="dialog" aria-labelledby="signupModalLabel"
aria-hidden="true">
<div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
        <div class="modal-header text-center">
            <img src="img/logo-black.png" width="70px" class="modal-title"/>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <form id="createAccountForm">
				<div class="alert alert-danger d-none" id="r_errorMsg" role="alert">
				</div>
                <h4 class="modal-title text-center" id="signupModalLabel">Sign Up Now!</h4>
                <fieldset class="p-4">
                    <label for="r_email" class="form-label">SMU Email Address</label>
                    <input id="r_email" class="form-control mb-3" type="email" placeholder="abc@xxx.smu.edu.sg / abc@smu.edu.sg" required>

                    <label for="r_pwd" class="form-label">Password</label>
                    <input id="r_pwd" class="form-control mb-3" type="password" placeholder="Password" required>

                    <label for="r_c_pwd" class="form-label">Confirm Password</label>
                    <input id="r_c_pwd" class="form-control mb-3" type="password" placeholder="Password" required>

                    <div class="d-flex justify-content-end"><button id="signupButton" type="submit" class="btn btn-primary font-weight-bold mt-3">Sign Up</button></div>
                    <p class="text-secondary text-center mt-4">Already have an account? 
                      <a class="text-primary text-decoration-none" name="openLoginModel" data-bs-dismiss="modal" type="button">Login</a>
                    </p>
                </fieldset>
            </form>
        </div>
    </div>
</div>
</div>

<!-- Bundled Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" 
integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" 
crossorigin="anonymous"></script>

<!-- login and sign up modal when onclick-->
<script>
    initializeModals();

	// Create Account
  	const signupForm = document.getElementById('createAccountForm');
	const r_errorMsg = document.getElementById('r_errorMsg');
	const signupButton = document.getElementById('signupButton');

	signupButton.addEventListener('click', function (event) {
		event.preventDefault()
		var result = createAccount(); // Call createAccount function
		if (result) {
			const signupModal = document.getElementById('signupModal');
			var closeModal = bootstrap.Modal.getInstance(signupModal);
			closeModal.hide(); // Close modal
			signupForm.reset(); // Reset form

      // Redirect to home.html
			window.location.href = 'home.html';
		}
	});
	
	// Login
	const signinForm = document.getElementById('signinForm');
	const l_errorMsg = document.getElementById('l_errorMsg');
	const signinButton = document.getElementById('signinButton');
	
	signinButton.addEventListener('click', function (event) {
		event.preventDefault();
		login().then((result) => {
			const loginModal = document.getElementById('loginModal');
			var closeModal = bootstrap.Modal.getInstance(loginModal);
			closeModal.hide(); // Close modal
			signinForm.reset(); // Reset form

			sessionStorage.setItem('userId', result.id);
      sessionStorage.setItem('userEmail', result.email);
      sessionStorage.setItem('name', result.name);
      sessionStorage.setItem('img', result.img);

			console.log(result.id);
			console.log(result.email);

			// Redirect to home.html
			window.location.href = 'home.html';
			
		}).catch((err) => {
			console.log(err);
		}); // Call login function
	});

</script>

</body>

</html>


